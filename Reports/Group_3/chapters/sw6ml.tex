%Introduction
In order to facilitate consistent data transfers between the global database and localDB, we have designed an XML language which resembles
the schema of the database. We have chosen to use XML, as it is a recognized standard with a wide array of tools available, in particular JDOM\cite{www.jdom.org}.
JDOM is a light weight implementation of SAX\footnote{Simple API for XML\cite{SAX}} and DOM\footnote{Data Object Model} for Java, which allows seamless integration of XML, with support for XPath\footnote{Language for navigating XML documents\cite{xPath}} and XSLT\footnote{etensible Stylesheet Language Transformations\cite{xslt}}.
In \autoref{sw6mlusage} a short usage documentation for sw6ml is provided. sw6ml is defined with XML schema.

\subsubsection{Language Design}

The sw6ml language consists of a number of primary elements, which reflect the tables in the database. Each of these elements accepts any number of \code{Entry} elements, that tells
the server which action it should take with the incoming data.
In \autoref{code:sw6mlExample01} a short example of legitimate sw6ml syntax for adding a row to the \code{AuthUsers} table, and deleting a row with the \code{idUser} table attribute equal to 2, is shown.

The \code{<AuthUsers>..content..</AuthUsers>} element identifies the table on which we want to make changes, the following \code{<Entry>..content..</Entry>} elements
define which row and what kind of action, through the \code{action="foo"} XML attribute, should be done on the row. 

\begin{Code}
\begin{lstlisting}[label=code:sw6mlExample01,language=XML,caption=Example of sw6ml syntax]
 <AuthUsers>
    <Entry action="create">
      <certificate type="string">This is a certificate</certificate>
      <idUser type="int">1</idUser>
      <arole type="int">1</arole>
      <username type="string">mette</username>
      <password type="string">obfuscated</password>
    </Entry>
    <Entry action="delete">
      <idUser type="int">2</idUser>
    </Entry>
  </AuthUsers>
\end{lstlisting}
\end{Code}

The \code{action="foo"} XML attribute has four legal types corresponding to the CRUD profile actions: Create, Read, Update, and Delete, this is shown in \autoref{code:sw6mlCrud}.
Contained in the \code{<Entry action="crud_type">..content..</Entry>} element is a series of 0 or more elements corresponding to the table schema of, in this case, the \code{AuthUsers} table.
It takes zero or more of the table attributes in a row, since not all table attributes are needed for all actions. As an example delete only requires the unique identifier of the table, and
updates will only need the unique identifier and the table attribute being updated.
\begin{figure}[H]
\begin{lstlisting}[label=code:sw6mlCrud,language=XML,caption=sw6ml crud simple type]
 <xs:simpleType name="crud">
  <xs:restriction base="xs:string">
    <xs:enumeration value="create"/>
    <xs:enumeration value="read"/>
    <xs:enumeration value="update"/>
    <xs:enumeration value="delete"/>
  </xs:restriction>
</xs:simpleType>
\end{lstlisting}
\end{figure}

\subsubsection{Documentation}
\label{sw6mlusage}
To use the current version of sw6ml, it is essential to know the elements required from the different crud types.
While XML schema provides advanced features for dynamic languages, sw6ml in its current version, is a primitive language consisting of simple types and sequences.
This is however all that is needed, with a few assertions on the format server side.

\autoref{code:sw6mlformal} shows the formal structure of a sw6ml document.
\begin{Code}
\begin{lstlisting}[label=code:sw6mlformal,language=XML,caption=Root and table elements]
<sw6ml> 
  <table_element_1>
    <Entry action="crud_type">
      <table_element_1_attribute_1/>
	...
      <table_element_1_attribute_n/>
    </Entry>
  </table_element_n>
  ...
  <table_element_n>
    <Entry action="crud_type">
      <table_element_n_attribute_1/>
	...
      <table_element_n_attribute_n/>
    </Entry>
  </table_element>
</sw6ml>
\end{lstlisting}
\end{Code}

Following is a short description of the setup of the \code{<Entry>} element for each CRUD type:

\begin{description}
 \item[create] creates a new row in the database: All attributes from the database schema is required, if no value exists, use null. See \autoref{code:sw6mlExample01} for an example.
 \item[update] Updates a field in a row, required in this order: Unique identifier of the row, attribute to be updated. See \autoref{code:sw6mlExample02} for an example.
 \item[delete] Deletes a row in the table: Only the unique identifier is required. See \autoref{code:sw6mlExample01} for an example.
 \item[read]   Read is only used in XML documents which are sent back from a request to the server, and thus requires no special formatting.
\end{description}

Notice the \code{<row_attribute type="bar">..</..>} XML attribute: Legitimate types are \code{string} or \code{int}, if the data type of the row attribute is a \code{string} or any other type requiring apostrophes
in an SQL query, use \code{string}, for anything else use \code{int}.

\begin{Code}
\begin{lstlisting}[label=code:sw6mlExample02,language=XML,caption=sw6ml update syntax example]
 <Entry action="update">
   <unique_identifier type="bar">foo</unique_identifier>
   <attribute_to_be_updated type="bar">newValue</attribute_to_be_updated>
 </Entry>
\end{lstlisting}
\end{Code}

The sw6ml schema can be found in the project repository together with a valid sw6ml document,
Full path: \url{http://code.google.com/p/sw6-2012/source/browse/random_group_stuff/Group_server/xml/sw6_schema.xsd}
and \url{http://code.google.com/p/sw6-2012/source/browse/random_group_stuff/Group_server/xml/sw6_example.xml} %TODO fix this document before handin;-)